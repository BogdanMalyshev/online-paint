{"version":3,"sources":["store/constants.js","store/actions.js","tools/Tool.js","tools/Brush.js","tools/Rect.js","tools/Circle.js","tools/Line.js","tools/Eraser.js","components/Toolbar/Toolbar.js","components/SettingBar/SettingBar.js","components/Canvas/Canvas.js","app.js","store/initialState.js","store/applicationReducer.js","index.js","store/storeConfig.js"],"names":["SET_TOOL","SET_CANVAS","SET_UNDO_LIST","SET_REDO_LIST","setTool","tool","type","constants","setRedoList","list","setUndoList","Tool","canvas","this","ctx","getContext","destroyEvents","color","fillStyle","strokeStyle","value","lineWidth","onmouseup","onmousedown","onmousemove","Brush","listen","mouseDown","mouseMoveHandler","bind","mouseDownHandler","mouseUpHandler","e","beginPath","moveTo","pageX","target","offsetLeft","pageY","offsetTop","draw","x","y","lineTo","stroke","Rect","startY","startX","saved","toDataURL","currentY","width","height","w","h","img","Image","src","onload","clearRect","drawImage","rect","fill","Circle","canvasData","currentX","r","Math","sqrt","a","arc","PI","Line","name","Eraser","canvasListen","prevColor","Toolbar","dispatch","useDispatch","useSelector","state","undoList","redoList","repaintCanvas","dataUrl","className","onClick","onChange","event","fillColor","length","pop","newRedoList","heigth","document","createElement","href","download","body","appendChild","click","removeChild","SettingBar","useState","lineWidthInputValue","setLineWidthInputValue","ref","useRef","useEffect","console","dir","current","htmlFor","id","min","max","strokeColor","Canvas","canvasRef","onMouseDown","push","App","initialState","applicationReducer","action","store","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createStore","ReactDOM","render","StrictMode","getElementById"],"mappings":"uRAAaA,EAAW,WACXC,EAAa,aACbC,EAAgB,gBAChBC,EAAgB,gBCDtB,SAASC,EAAQC,GACpB,MAAO,CACHC,KAAMC,EACNF,QAWD,SAASG,EAAYC,GACxB,MAAO,CACHH,KAAMC,EACNE,QAID,SAASC,EAAYD,GACxB,MAAO,CACHH,KAAMC,EACNE,Q,gCC1BaE,E,WACjB,WAAYC,GAAS,oBACjBC,KAAKD,OAASA,EACdC,KAAKC,IAAMF,EAAOG,WAAW,MAC7BF,KAAKG,gB,2CAGT,SAAcC,GACVJ,KAAKC,IAAII,UAAYD,I,uBAGzB,SAAgBA,GACZJ,KAAKC,IAAIK,YAAcF,I,qBAG3B,SAAcG,GACVP,KAAKC,IAAIO,UAAYD,I,2BAGzB,WACIP,KAAKD,OAAOU,UAAY,KACxBT,KAAKD,OAAOW,YAAc,KAC1BV,KAAKD,OAAOY,YAAc,S,KCpBbC,E,kDACjB,WAAYb,GAAS,IAAD,8BAChB,cAAMA,IACDc,SACL,EAAKC,WAAY,EAHD,E,0CAMpB,WACId,KAAKD,OAAOY,YAAcX,KAAKe,iBAAiBC,KAAKhB,MACrDA,KAAKD,OAAOW,YAAcV,KAAKiB,iBAAiBD,KAAKhB,MACrDA,KAAKD,OAAOU,UAAYT,KAAKkB,eAAeF,KAAKhB,Q,4BAGrD,WACIA,KAAKc,WAAY,I,8BAErB,SAAiBK,GACbnB,KAAKc,WAAY,EACjBd,KAAKC,IAAImB,YACTpB,KAAKC,IAAIoB,OAAOF,EAAEG,MAAQH,EAAEI,OAAOC,WAAYL,EAAEM,MAAQN,EAAEI,OAAOG,a,8BAEtE,SAAiBP,GACTnB,KAAKc,WACLd,KAAK2B,KAAKR,EAAEG,MAAQH,EAAEI,OAAOC,WAAYL,EAAEM,MAAQN,EAAEI,OAAOG,a,kBAIpE,SAAKE,EAAGC,GACJ7B,KAAKC,IAAI6B,OAAOF,EAAGC,GACnB7B,KAAKC,IAAI8B,a,GA7BkBjC,GCAdkC,E,kDACjB,WAAYjC,GAAS,IAAD,8BAChB,cAAMA,IACDc,SAFW,E,0CAKpB,WACIb,KAAKD,OAAOY,YAAcX,KAAKe,iBAAiBC,KAAKhB,MACrDA,KAAKD,OAAOW,YAAcV,KAAKiB,iBAAiBD,KAAKhB,MACrDA,KAAKD,OAAOU,UAAYT,KAAKkB,eAAeF,KAAKhB,Q,4BAGrD,SAAemB,GACXnB,KAAKc,WAAY,I,8BAGrB,SAAiBK,GACbnB,KAAKc,WAAY,EACjBd,KAAKC,IAAImB,YACTpB,KAAKiC,OAASd,EAAEM,MAAQN,EAAEI,OAAOG,UACjC1B,KAAKkC,OAASf,EAAEG,MAAQH,EAAEI,OAAOC,WACjCxB,KAAKmC,MAAQnC,KAAKD,OAAOqC,c,8BAG7B,SAAiBjB,GACb,GAAInB,KAAKc,UAAW,CAChB,IAAIuB,EAAWlB,EAAEM,MAAQN,EAAEI,OAAOG,UAE9BY,EADWnB,EAAEG,MAAQH,EAAEI,OAAOC,WACXxB,KAAKkC,OACxBK,EAASF,EAAWrC,KAAKiC,OAC7BjC,KAAK2B,KAAK3B,KAAKkC,OAAQlC,KAAKiC,OAAQK,EAAOC,M,kBAInD,SAAKX,EAAGC,EAAGW,EAAGC,GAAI,IAAD,OACPC,EAAM,IAAIC,MAChBD,EAAIE,IAAM5C,KAAKmC,MACfO,EAAIG,OAAS,WACT,EAAK5C,IAAI6C,UAAU,EAAE,EAAG,EAAK/C,OAAOuC,MAAO,EAAKvC,OAAOwC,QACvD,EAAKtC,IAAI8C,UAAUL,EAAK,EAAG,EAAG,EAAK3C,OAAOuC,MAAO,EAAKvC,OAAOwC,QAC7D,EAAKtC,IAAImB,YACT,EAAKnB,IAAI+C,KAAKpB,EAAGC,EAAGW,EAAGC,GACvB,EAAKxC,IAAIgD,OACT,EAAKhD,IAAI8B,c,GA3CajC,G,wBCCboD,E,kDACjB,WAAYnD,GAAS,IAAD,8BAChB,cAAMA,IACDc,SAFW,E,0CAKpB,WACIb,KAAKD,OAAOY,YAAcX,KAAKe,iBAAiBC,KAAKhB,MACrDA,KAAKD,OAAOW,YAAcV,KAAKiB,iBAAiBD,KAAKhB,MACrDA,KAAKD,OAAOU,UAAYT,KAAKkB,eAAeF,KAAKhB,Q,8BAGrD,SAAiBmB,GACbnB,KAAKc,WAAY,EACjB,IAAIqC,EAAanD,KAAKD,OAAOqC,YAC7BpC,KAAKC,IAAImB,YACTpB,KAAKkC,OAASf,EAAEG,MAAMH,EAAEI,OAAOC,WAC/BxB,KAAKiC,OAASd,EAAEM,MAAMN,EAAEI,OAAOG,UAC/B1B,KAAKmC,MAAQgB,I,4BAGjB,SAAehC,GACXnB,KAAKc,WAAY,I,8BAGrB,SAAiBK,GACb,GAAGnB,KAAKc,UAAW,CACf,IAAIsC,EAAYjC,EAAEG,MAAMH,EAAEI,OAAOC,WAC7Ba,EAAYlB,EAAEM,MAAMN,EAAEI,OAAOG,UAC7BY,EAAQc,EAASpD,KAAKkC,OACtBK,EAASF,EAASrC,KAAKiC,OACvBoB,EAAIC,KAAKC,KAAK,SAAAjB,EAAO,GAAP,SAAWC,EAAQ,IACrCvC,KAAK2B,KAAK3B,KAAKkC,OAAQlC,KAAKiC,OAAQoB,M,kBAI5C,SAAKzB,EAAEC,EAAEwB,GACL,IAAMX,EAAM,IAAIC,MAChBD,EAAIE,IAAM5C,KAAKmC,MACfO,EAAIG,OAAS,cAAAW,EAAA,4BAAAA,EAAA,sDACTxD,KAAKC,IAAI6C,UAAU,EAAE,EAAG9C,KAAKD,OAAOuC,MAAOtC,KAAKD,OAAOwC,QACvDvC,KAAKC,IAAI8C,UAAUL,EAAK,EAAG,EAAG1C,KAAKD,OAAOuC,MAAOtC,KAAKD,OAAOwC,QAC7DvC,KAAKC,IAAImB,YACTpB,KAAKC,IAAIwD,IAAI7B,EAAGC,EAAGwB,EAAG,EAAG,EAAEC,KAAKI,IAChC1D,KAAKC,IAAIgD,OACTjD,KAAKC,IAAI8B,SANA,gDAOXf,KAAKhB,U,GA9CqBF,GCAf6D,E,kDACjB,WAAY5D,GAAS,IAAD,8BAChB,cAAMA,IACDc,SACL,EAAK+C,KAAO,OAHI,E,0CAMpB,WACI5D,KAAKD,OAAOW,YAAcV,KAAKiB,iBAAiBD,KAAKhB,MACrDA,KAAKD,OAAOU,UAAYT,KAAKkB,eAAeF,KAAKhB,MACjDA,KAAKD,OAAOY,YAAcX,KAAKe,iBAAiBC,KAAKhB,Q,8BAGzD,SAAiBmB,GACbnB,KAAKc,WAAY,EACjBd,KAAKoD,SAAWjC,EAAEG,MAAMH,EAAEI,OAAOC,WACjCxB,KAAKqC,SAAWlB,EAAEM,MAAMN,EAAEI,OAAOG,UACjC1B,KAAKC,IAAImB,YACTpB,KAAKC,IAAIoB,OAAOrB,KAAKoD,SAAUpD,KAAKqC,UACpCrC,KAAKmC,MAAQnC,KAAKD,OAAOqC,c,4BAG7B,SAAejB,GACXnB,KAAKc,WAAY,I,8BAGrB,SAAiBK,GACTnB,KAAKc,WACLd,KAAK2B,KAAKR,EAAEG,MAAMH,EAAEI,OAAOC,WAAYL,EAAEM,MAAMN,EAAEI,OAAOG,a,kBAKhE,SAAKE,EAAEC,GACH,IAAMa,EAAM,IAAIC,MAChBD,EAAIE,IAAM5C,KAAKmC,MACfO,EAAIG,OAAS,cAAAW,EAAA,4BAAAA,EAAA,sDACTxD,KAAKC,IAAI6C,UAAU,EAAE,EAAG9C,KAAKD,OAAOuC,MAAOtC,KAAKD,OAAOwC,QACvDvC,KAAKC,IAAI8C,UAAUL,EAAK,EAAG,EAAG1C,KAAKD,OAAOuC,MAAOtC,KAAKD,OAAOwC,QAC7DvC,KAAKC,IAAImB,YACTpB,KAAKC,IAAIoB,OAAOrB,KAAKoD,SAAUpD,KAAKqC,UACpCrC,KAAKC,IAAI6B,OAAOF,EAAGC,GACnB7B,KAAKC,IAAI8B,SANA,gDAOXf,KAAKhB,U,GA3CmBF,GCDb+D,E,kDACjB,WAAY9D,GAAS,IAAD,8BAChB,cAAMA,IACD+D,eACL,EAAKC,UAAY,EAAK9D,IAAIK,YAHV,E,gDAMpB,WAAgB,IAAD,OACXN,KAAKD,OAAOW,YAAc,SAACS,GACvB,EAAKlB,IAAIK,YAAc,UACvB,EAAKW,iBAAiBE,IAE1BnB,KAAKD,OAAOU,UAAY,SAACU,GACrB,EAAKlB,IAAIK,YAAc,EAAKyD,UAC5B,EAAK7C,eAAeC,M,kBAI5B,SAAKS,EAAGC,GACJ7B,KAAKC,IAAI6B,OAAOF,EAAGC,GACnB7B,KAAKC,IAAI8B,a,GApBmBnB,G,OCqFrBoD,MA9Ef,WACI,IAAMC,EAAWC,cACXnE,EAASoE,aAAY,SAAAC,GAAK,OAAIA,EAAMrE,UACpCP,EAAO2E,aAAY,SAAAC,GAAK,OAAIA,EAAM5E,QAClC6E,EAAWF,aAAY,SAAAC,GAAK,OAAIA,EAAMC,YACtCC,EAAWH,aAAY,SAAAC,GAAK,OAAIA,EAAME,YAc5C,SAASC,EAAcC,EAASvE,GAC5B,IAAIyC,EAAM,IAAIC,MACdD,EAAIE,IAAM4B,EACV9B,EAAIG,OAAU,WACV5C,EAAI6C,UAAU,EAAE,EAAG/C,EAAOuC,MAAOvC,EAAOwC,QACxCtC,EAAI8C,UAAUL,EAAK,EAAG,EAAG3C,EAAOuC,MAAOvC,EAAOwC,SAuCtD,OACI,sBAAKkC,UAAU,UAAf,UACI,wBAAQA,UAAU,qBAAqBC,QAxD1B,kBAAMT,EAAS1E,EAAQ,IAAIqB,EAAMb,QAyD9C,wBAAQ0E,UAAU,oBAAoBC,QAxD1B,kBAAMT,EAAS1E,EAAQ,IAAIyC,EAAKjC,QAyD5C,wBAAQ0E,UAAU,sBAAsBC,QAxD1B,kBAAMT,EAAS1E,EAAQ,IAAI2D,EAAOnD,QAyDhD,wBAAQ0E,UAAU,sBAAsBC,QAvD1B,kBAAMT,EAAS1E,EAAQ,IAAIsE,EAAO9D,QAwDhD,wBAAQ0E,UAAU,oBAAoBC,QAzD1B,kBAAMT,EAAS1E,EAAQ,IAAIoE,EAAK5D,QA0D5C,uBAAON,KAAK,QAAQkF,SAvD5B,SAA4BC,GACxBpF,EAAKqF,UAAYD,EAAMrD,OAAOhB,OAsDwBkE,UAAU,iBAC5D,wBAAQA,UAAU,oBAAoBC,QA3C9C,WACI,IAAIzE,EAAMF,EAAOG,WAAW,MACtBN,EAAI,YAAOyE,GACjB,GAAIzE,EAAKkF,OAAS,EAAG,CACjB,IAAIN,EAAU5E,EAAKmF,MACnBd,EAASpE,EAAYD,IACrB,IAAMoF,EAAW,sBAAOV,GAAP,CAAiBvE,EAAOqC,cACzC6B,EAAStE,EAAYqF,IACrBT,EAAcC,EAASvE,QAEvBA,EAAI6C,UAAU,EAAG,EAAG/C,EAAOuC,MAAOvC,EAAOkF,WAkCzC,wBAAQR,UAAU,oBAAoBC,QA9B9C,WACI,IAAIzE,EAAMF,EAAOG,WAAW,MACtBN,EAAI,YAAO0E,GACjB,GAAI1E,EAAKkF,OAAS,EAAG,CACjB,IAAIN,EAAU5E,EAAKmF,MACnBd,EAAStE,EAAYC,IACrBqE,EAASpE,EAAY,GAAD,mBAAKwE,GAAL,CAAetE,EAAOqC,gBAC1CmC,EAAcC,EAASvE,OAwBvB,wBAAQwE,UAAU,oBAAoBC,QApB7B,WACb,IAAMF,EAAUzE,EAAOqC,YACjBoB,EAAI0B,SAASC,cAAc,KACjC3B,EAAE4B,KAAOZ,EACThB,EAAE6B,SAAW,YACbH,SAASI,KAAKC,YAAY/B,GAC1BA,EAAEgC,QACFN,SAASI,KAAKG,YAAYjC,U,cChBnBkC,MAjDf,WACI,IAAMlG,EAAO2E,aAAY,SAAAC,GAAK,OAAIA,EAAM5E,QADtB,EAEoCmG,mBAAS,KAF7C,mBAEXC,EAFW,KAEUC,EAFV,KAGZC,EAAMC,mBA4BZ,OA1BAC,qBAAU,WACNC,QAAQC,IAAIJ,EAAIK,WACjB,CAACP,IAyBA,sBAAKnB,UAAU,cAAf,UACI,uBAAO2B,QAAQ,aAAf,uFACA,uBACIN,IAAKA,EACLnB,SA3BZ,SAAgCC,GAC5B,IAAMrE,EAAQqE,EAAMrD,OAAOhB,MAC3B,OAAQA,GACJ,KAAKA,EAAQ,GACTsF,EAAuB,MACvBrG,EAAKgB,UAAY,GACjB,MAGJ,KAAKD,EAAQ,EACTsF,EAAuB,KACvBrG,EAAKgB,UAAY,EACjB,MAEJ,QACIqF,EAAuBtF,GACvBf,EAAKgB,UAAYD,IAYjB8F,GAAG,aACH5G,KAAK,SACL6G,IAAK,EACLC,IAAK,GACLhG,MAAOqF,IAEX,uBAAOQ,QAAQ,eAAf,iFACA,uBAAOzB,SAAU,SAAAxD,GAAC,OAAI3B,EAAKgH,YAAcrF,EAAEI,OAAOhB,OAAO8F,GAAG,eAAe5G,KAAK,c,MClB7EgH,MAxBf,WACI,IAAMC,EAAYX,mBACZ9B,EAAWC,cACXG,EAAWF,aAAY,SAAAC,GAAK,OAAIA,EAAMC,YAc5C,OAZA2B,qBAAU,WTFP,IAAmBjG,ESGlBkE,GTHkBlE,ESGC2G,EAAUP,QTF1B,CACH1G,KAAMC,EACNK,YSCAkE,EAAS1E,EAAQ,IAAIqB,EAAM8F,EAAUP,aACtC,IAUC,qBAAK1B,UAAU,SAAf,SACI,wBAAQkC,YATS,WACrB,IAAM/G,EAAI,YAAOyE,GACjBzE,EAAKgH,KAAKF,EAAUP,QAAQ/D,aAC5B6B,EAASpE,EAAYD,IACrBqE,EAAStE,EAAY,MAKsBmG,IAAKY,EAAWpE,MAAO,IAAKC,OAAQ,SCTxEsE,MAVf,WACI,OACI,sBAAKpC,UAAU,MAAf,UACI,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,Q,eCJGqC,EAPM,CACjBtH,KAAM,KACNO,OAAQ,KACRuE,SAAU,GACVD,SAAU,ICDD0C,EAAqB,WAAmC,IAAlC3C,EAAiC,uDAAzB0C,EAAcE,EAAW,uCAChE,OAAQA,EAAOvH,MAEX,KAAKC,EACD,OAAO,2BACA0E,GADP,IACc5E,KAAMwH,EAAOxH,OAI/B,KAAKE,EACD,OAAO,2BACA0E,GADP,IACcrE,OAAQiH,EAAOjH,SAIjC,KAAKL,EACD,OAAO,2BACA0E,GADP,IACcC,SAAU2C,EAAOpH,OAInC,KAAKF,EACD,OAAO,2BACA0E,GADP,IACcE,SAAU0C,EAAOpH,OAInC,QACI,OAAOwE,ICzBnB,IAAM6C,ECAEC,OAAOC,qCACAC,YAAYL,EAAoBG,OAAOC,wCAG3CC,YAAYL,GDFvBM,IAASC,OACP,cAAC,IAAMC,WAAP,UACI,cAAC,IAAD,CAAUN,MAAOA,EAAjB,SACI,cAAC,EAAD,QAGR/B,SAASsC,eAAe,W","file":"static/js/main.2c57e651.chunk.js","sourcesContent":["export const SET_TOOL = \"SET_TOOL\"\r\nexport const SET_CANVAS = \"SET_CANVAS\"\r\nexport const SET_UNDO_LIST = \"SET_UNDO_LIST\"\r\nexport const SET_REDO_LIST = \"SET_REDO_LIST\"\r\n","import * as constants from \"./constants\";\r\n\r\nexport function setTool(tool) {\r\n    return {\r\n        type: constants.SET_TOOL,\r\n        tool\r\n    }\r\n}\r\n\r\nexport function setCanvas(canvas) {\r\n    return {\r\n        type: constants.SET_CANVAS,\r\n        canvas\r\n    }\r\n}\r\n\r\nexport function setRedoList(list) {\r\n    return {\r\n        type: constants.SET_REDO_LIST,\r\n        list\r\n    }\r\n}\r\n\r\nexport function setUndoList(list) {\r\n    return {\r\n        type: constants.SET_UNDO_LIST,\r\n        list\r\n    }\r\n}\r\n\r\n","export default class Tool {\r\n    constructor(canvas) {\r\n        this.canvas = canvas\r\n        this.ctx = canvas.getContext(\"2d\")\r\n        this.destroyEvents()\r\n    }\r\n\r\n    set fillColor(color) {\r\n        this.ctx.fillStyle = color\r\n    }\r\n\r\n    set strokeColor(color) {\r\n        this.ctx.strokeStyle = color\r\n    }\r\n\r\n    set lineWidth(value) {\r\n        this.ctx.lineWidth = value\r\n    }\r\n\r\n    destroyEvents() {\r\n        this.canvas.onmouseup = null\r\n        this.canvas.onmousedown = null\r\n        this.canvas.onmousemove = null\r\n    }\r\n}","import Tool from \"./Tool\";\r\n\r\nexport default class Brush extends Tool{\r\n    constructor(canvas) {\r\n        super(canvas);\r\n        this.listen()\r\n        this.mouseDown = false\r\n    }\r\n\r\n    listen() {\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n    }\r\n\r\n    mouseUpHandler() {\r\n        this.mouseDown = false\r\n    }\r\n    mouseDownHandler(e) {\r\n        this.mouseDown = true\r\n        this.ctx.beginPath()\r\n        this.ctx.moveTo(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\r\n    }\r\n    mouseMoveHandler(e) {\r\n        if (this.mouseDown) {\r\n            this.draw(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\r\n        }\r\n    }\r\n\r\n    draw(x, y) {\r\n        this.ctx.lineTo(x, y)\r\n        this.ctx.stroke()\r\n    }\r\n\r\n}","import Tool from \"./Tool\";\r\n\r\nexport default class Rect extends Tool{\r\n    constructor(canvas) {\r\n        super(canvas);\r\n        this.listen()\r\n    }\r\n\r\n    listen() {\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n    }\r\n\r\n    mouseUpHandler(e) {\r\n        this.mouseDown = false\r\n    }\r\n\r\n    mouseDownHandler(e) {\r\n        this.mouseDown = true\r\n        this.ctx.beginPath()\r\n        this.startY = e.pageY - e.target.offsetTop\r\n        this.startX = e.pageX - e.target.offsetLeft\r\n        this.saved = this.canvas.toDataURL()\r\n    }\r\n\r\n    mouseMoveHandler(e) {\r\n        if (this.mouseDown) {\r\n            let currentY = e.pageY - e.target.offsetTop\r\n            let currentX = e.pageX - e.target.offsetLeft\r\n            let width = currentX - this.startX\r\n            let height = currentY - this.startY\r\n            this.draw(this.startX, this.startY, width, height)\r\n        }\r\n    }\r\n\r\n    draw(x, y, w, h) {\r\n        const img = new Image()\r\n        img.src = this.saved\r\n        img.onload = () => {\r\n            this.ctx.clearRect(0,0, this.canvas.width, this.canvas.height)\r\n            this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\r\n            this.ctx.beginPath()\r\n            this.ctx.rect(x, y, w, h)\r\n            this.ctx.fill()\r\n            this.ctx.stroke()\r\n        }\r\n    }\r\n\r\n}","import Tool from \"./Tool\";\r\n\r\n\r\nexport default class Circle extends Tool {\r\n    constructor(canvas) {\r\n        super(canvas);\r\n        this.listen()\r\n    }\r\n\r\n    listen() {\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n    }\r\n\r\n    mouseDownHandler(e) {\r\n        this.mouseDown = true\r\n        let canvasData = this.canvas.toDataURL()\r\n        this.ctx.beginPath()\r\n        this.startX = e.pageX-e.target.offsetLeft\r\n        this.startY = e.pageY-e.target.offsetTop\r\n        this.saved = canvasData\r\n    }\r\n\r\n    mouseUpHandler(e) {\r\n        this.mouseDown = false\r\n    }\r\n\r\n    mouseMoveHandler(e) {\r\n        if(this.mouseDown) {\r\n            let currentX =  e.pageX-e.target.offsetLeft\r\n            let currentY =  e.pageY-e.target.offsetTop\r\n            let width = currentX-this.startX\r\n            let height = currentY-this.startY\r\n            let r = Math.sqrt(width**2 + height**2)\r\n            this.draw(this.startX, this.startY, r)\r\n        }\r\n    }\r\n\r\n    draw(x,y,r) {\r\n        const img = new Image()\r\n        img.src = this.saved\r\n        img.onload = async function () {\r\n            this.ctx.clearRect(0,0, this.canvas.width, this.canvas.height)\r\n            this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\r\n            this.ctx.beginPath()\r\n            this.ctx.arc(x, y, r, 0, 2*Math.PI)\r\n            this.ctx.fill()\r\n            this.ctx.stroke()\r\n        }.bind(this)\r\n    }\r\n}","import Tool from \"./Tool\";\r\n\r\n\r\nexport default class Line extends Tool {\r\n    constructor(canvas) {\r\n        super(canvas);\r\n        this.listen()\r\n        this.name = 'Line'\r\n    }\r\n\r\n    listen() {\r\n        this.canvas.onmousedown = this.mouseDownHandler.bind(this)\r\n        this.canvas.onmouseup = this.mouseUpHandler.bind(this)\r\n        this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\r\n    }\r\n\r\n    mouseDownHandler(e) {\r\n        this.mouseDown = true\r\n        this.currentX = e.pageX-e.target.offsetLeft\r\n        this.currentY = e.pageY-e.target.offsetTop\r\n        this.ctx.beginPath()\r\n        this.ctx.moveTo(this.currentX, this.currentY )\r\n        this.saved = this.canvas.toDataURL()\r\n    }\r\n\r\n    mouseUpHandler(e) {\r\n        this.mouseDown = false\r\n    }\r\n\r\n    mouseMoveHandler(e) {\r\n        if (this.mouseDown) {\r\n            this.draw(e.pageX-e.target.offsetLeft, e.pageY-e.target.offsetTop);\r\n        }\r\n    }\r\n\r\n\r\n    draw(x,y) {\r\n        const img = new Image()\r\n        img.src = this.saved\r\n        img.onload = async function () {\r\n            this.ctx.clearRect(0,0, this.canvas.width, this.canvas.height)\r\n            this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\r\n            this.ctx.beginPath()\r\n            this.ctx.moveTo(this.currentX, this.currentY )\r\n            this.ctx.lineTo(x, y)\r\n            this.ctx.stroke()\r\n        }.bind(this)\r\n\r\n    }\r\n}","import Brush from \"./Brush\";\r\n\r\nexport default class Eraser extends Brush {\r\n    constructor(canvas) {\r\n        super(canvas);\r\n        this.canvasListen()\r\n        this.prevColor = this.ctx.strokeStyle\r\n    }\r\n\r\n    canvasListen() {\r\n        this.canvas.onmousedown = (e) => {\r\n            this.ctx.strokeStyle = \"#ffffff\"\r\n            this.mouseDownHandler(e)\r\n        }\r\n        this.canvas.onmouseup = (e) => {\r\n            this.ctx.strokeStyle = this.prevColor\r\n            this.mouseUpHandler(e)\r\n        }\r\n    }\r\n\r\n    draw(x, y) {\r\n        this.ctx.lineTo(x, y)\r\n        this.ctx.stroke()\r\n    }\r\n}","import \"./toolbar.scss\"\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {setRedoList, setTool, setUndoList} from \"../../store/actions\";\r\nimport Brush from \"../../tools/Brush\";\r\nimport Rect from \"../../tools/Rect\";\r\nimport Circle from \"../../tools/Circle\";\r\nimport Line from \"../../tools/Line\";\r\nimport Eraser from \"../../tools/Eraser\";\r\n\r\nfunction Toolbar() {\r\n    const dispatch = useDispatch()\r\n    const canvas = useSelector(state => state.canvas)\r\n    const tool = useSelector(state => state.tool)\r\n    const undoList = useSelector(state => state.undoList)\r\n    const redoList = useSelector(state => state.redoList)\r\n\r\n\r\n\r\n    const onBrushClick = () => dispatch(setTool(new Brush(canvas)))\r\n    const onRectClick = () => dispatch(setTool(new Rect(canvas)))\r\n    const onCircleClick = () => dispatch(setTool(new Circle(canvas)))\r\n    const onLineClick = () => dispatch(setTool(new Line(canvas)))\r\n    const onEraserClick = () => dispatch(setTool(new Eraser(canvas)))\r\n\r\n    function onColorInputChange(event) {\r\n        tool.fillColor = event.target.value\r\n    }\r\n\r\n    function repaintCanvas(dataUrl, ctx) {\r\n        let img = new Image()\r\n        img.src = dataUrl\r\n        img.onload =  () => {\r\n            ctx.clearRect(0,0, canvas.width, canvas.height)\r\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\r\n        }\r\n    }\r\n\r\n    function undo() {\r\n        let ctx = canvas.getContext('2d')\r\n        const list = [...undoList]\r\n        if (list.length > 0) {\r\n            let dataUrl = list.pop()\r\n            dispatch(setUndoList(list))\r\n            const newRedoList = [...redoList, canvas.toDataURL()]\r\n            dispatch(setRedoList(newRedoList))\r\n            repaintCanvas(dataUrl, ctx)\r\n        } else {\r\n            ctx.clearRect(0, 0, canvas.width, canvas.heigth)\r\n        }\r\n    }\r\n\r\n    function redo() {\r\n        let ctx = canvas.getContext('2d')\r\n        const list = [...redoList]\r\n        if (list.length > 0) {\r\n            let dataUrl = list.pop()\r\n            dispatch(setRedoList(list))\r\n            dispatch(setUndoList([...undoList, canvas.toDataURL()]))\r\n            repaintCanvas(dataUrl, ctx)\r\n        }\r\n    }\r\n\r\n    const download = () => {\r\n        const dataUrl = canvas.toDataURL()\r\n        const a = document.createElement('a')\r\n        a.href = dataUrl\r\n        a.download = \"image.jpg\"\r\n        document.body.appendChild(a)\r\n        a.click()\r\n        document.body.removeChild(a)\r\n    }\r\n\r\n    return (\r\n        <div className=\"toolbar\">\r\n            <button className=\"toolbar__btn brush\" onClick={onBrushClick}/>\r\n            <button className=\"toolbar__btn rect\" onClick={onRectClick}/>\r\n            <button className=\"toolbar__btn circle\" onClick={onCircleClick}/>\r\n            <button className=\"toolbar__btn eraser\" onClick={onEraserClick}/>\r\n            <button className=\"toolbar__btn line\" onClick={onLineClick}/>\r\n            <input type=\"color\" onChange={onColorInputChange} className=\"change-color\"/>\r\n            <button className=\"toolbar__btn undo\" onClick={undo}/>\r\n            <button className=\"toolbar__btn redo\" onClick={redo}/>\r\n            <button className=\"toolbar__btn save\" onClick={download}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Toolbar","import {useEffect, useRef, useState} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport \"./setting-bar.scss\"\r\n\r\nfunction SettingBar() {\r\n    const tool = useSelector(state => state.tool)\r\n    const [lineWidthInputValue, setLineWidthInputValue] = useState(\"1\")\r\n    const ref = useRef()\r\n\r\n    useEffect(() => {\r\n        console.dir(ref.current)\r\n    }, [lineWidthInputValue])\r\n\r\n    function onLineWidthInputChange(event) {\r\n        const value = event.target.value\r\n        switch (value) {\r\n            case value > 50: {\r\n                setLineWidthInputValue(\"50\")\r\n                tool.lineWidth = 50\r\n                break\r\n            }\r\n\r\n            case value < 1: {\r\n                setLineWidthInputValue(\"1\")\r\n                tool.lineWidth = 1\r\n                break\r\n            }\r\n            default: {\r\n                setLineWidthInputValue(value)\r\n                tool.lineWidth = value\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"setting-bar\">\r\n            <label htmlFor=\"line-width\">Толщина линии</label>\r\n            <input\r\n                ref={ref}\r\n                onChange={onLineWidthInputChange}\r\n                id=\"line-width\"\r\n                type=\"number\"\r\n                min={1}\r\n                max={50}\r\n                value={lineWidthInputValue}\r\n            />\r\n            <label htmlFor=\"stroke-color\">Цвет обводки</label>\r\n            <input onChange={e => tool.strokeColor = e.target.value} id=\"stroke-color\" type=\"color\"/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SettingBar","import \"./canvas.scss\"\r\nimport {useEffect, useRef} from \"react\";\r\nimport {setCanvas, setRedoList, setTool, setUndoList} from \"../../store/actions\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport Brush from \"../../tools/Brush\";\r\n\r\nfunction Canvas() {\r\n    const canvasRef = useRef()\r\n    const dispatch = useDispatch()\r\n    const undoList = useSelector(state => state.undoList)\r\n\r\n    useEffect(() => {\r\n        dispatch(setCanvas(canvasRef.current))\r\n        dispatch(setTool(new Brush(canvasRef.current)))\r\n    }, [])\r\n\r\n    const mouseDownHandler = () => {\r\n        const list = [...undoList]\r\n        list.push(canvasRef.current.toDataURL())\r\n        dispatch(setUndoList(list))\r\n        dispatch(setRedoList([]))\r\n    }\r\n\r\n    return (\r\n        <div className=\"canvas\">\r\n            <canvas onMouseDown={mouseDownHandler} ref={canvasRef} width={900} height={600}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Canvas","import React from 'react';\r\nimport \"./styles/app.scss\"\r\nimport Toolbar from \"./components/Toolbar/Toolbar\";\r\nimport SettingBar from \"./components/SettingBar/SettingBar\";\r\nimport Canvas from \"./components/Canvas/Canvas\";\r\n\r\nfunction App() {\r\n    return (\r\n        <div className=\"app\">\r\n            <Toolbar/>\r\n            <SettingBar/>\r\n            <Canvas/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;","const initialState = {\r\n    tool: null,\r\n    canvas: null,\r\n    redoList: [],\r\n    undoList: []\r\n};\r\n\r\nexport default initialState\r\n","import initialState from \"./initialState\";\r\nimport * as constants from \"./constants\";\r\n\r\nexport const applicationReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case constants.SET_TOOL: {\r\n            return {\r\n                ...state, tool: action.tool\r\n            }\r\n        }\r\n\r\n        case constants.SET_CANVAS: {\r\n            return {\r\n                ...state, canvas: action.canvas\r\n            }\r\n        }\r\n\r\n        case constants.SET_UNDO_LIST: {\r\n            return {\r\n                ...state, undoList: action.list\r\n            }\r\n        }\r\n\r\n        case constants.SET_REDO_LIST: {\r\n            return {\r\n                ...state, redoList: action.list\r\n            }\r\n        }\r\n\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from \"./app\";\nimport {Provider} from \"react-redux\";\nimport storeConfig from \"./store/storeConfig\";\n\nconst store = storeConfig()\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n          <App/>\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n","import {createStore} from \"redux\";\r\nimport {applicationReducer} from \"./applicationReducer\"\r\n\r\n\r\nexport default function storeConfig() {\r\n\r\n    if (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) {\r\n        return createStore(applicationReducer, window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__())\r\n    }\r\n\r\n    return createStore(applicationReducer)\r\n}"],"sourceRoot":""}